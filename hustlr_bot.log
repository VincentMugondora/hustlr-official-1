2025-11-27 13:24:20,721 - app.api.whatsapp - INFO - [2025-11-27T11:24:20.721889] WhatsApp webhook received
2025-11-27 13:24:20,722 - app.api.whatsapp - INFO - Headers: {'user-agent': 'Mozilla/5.0 (Windows NT; Windows NT 10.0; en-ZW) WindowsPowerShell/5.1.26100.7019', 'content-type': 'application/json', 'host': '127.0.0.1:8000', 'content-length': '334', 'connection': 'Keep-Alive'}
2025-11-27 13:24:20,723 - app.api.whatsapp - INFO - Raw payload: {
  "entry": [
    {
      "changes": [
        {
          "value": {
            "messages": [
              {
                "from": "1234567890",
                "text": {
                  "body": "hello"
                },
                "id": "msg123",
                "timestamp": "1701084000",
                "type": "text"
              }
            ],
            "contacts": [
              {
                "name": {
                  "formatted_name": "Test User"
                },
                "wa_id": "1234567890"
              }
            ],
            "metadata": {
              "phone_number_id": "912423798601397",
              "display_phone_number": "15551786519"
            }
          }
        }
      ]
    }
  ]
}
2025-11-27 13:24:20,724 - app.api.whatsapp - INFO - Parsed message object: <app.models.message.WhatsAppMessage object at 0x00000223849217F0>
2025-11-27 13:24:20,724 - app.api.whatsapp - INFO - From number: 1234567890
2025-11-27 13:24:20,725 - app.api.whatsapp - INFO - Message text: 'hello'
2025-11-27 13:24:20,725 - app.api.whatsapp - INFO - Message length: 5 characters
2025-11-27 13:24:20,725 - app.api.whatsapp - INFO - Message ID: msg123
2025-11-27 13:24:20,726 - app.api.whatsapp - INFO - Message timestamp: 1701084000
2025-11-27 13:24:20,726 - app.api.whatsapp - INFO - Message type: text
2025-11-27 13:24:20,726 - app.api.whatsapp - INFO - Contact name: Test User
2025-11-27 13:24:20,727 - app.api.whatsapp - INFO - Contact wa_id: 1234567890
2025-11-27 13:24:20,727 - app.api.whatsapp - INFO - Phone number ID: 912423798601397
2025-11-27 13:24:20,727 - app.api.whatsapp - INFO - Display phone number: 15551786519
2025-11-27 13:24:22,919 - app.api.whatsapp - ERROR - Error handling message from 1234567890: WhatsApp API configuration missing
2025-11-27 13:24:22,920 - app.api.whatsapp - ERROR - Failed to send error message: WhatsApp API configuration missing
2025-11-27 13:29:46,498 - app.api.whatsapp - INFO - [2025-11-27T11:29:46.498475] WhatsApp webhook received
2025-11-27 13:29:46,499 - app.api.whatsapp - INFO - Headers: {'host': 'e7456aa48462.ngrok-free.app', 'user-agent': 'Mozilla/5.0 (Windows NT; Windows NT 10.0; en-ZW) WindowsPowerShell/5.1.26100.7019', 'content-length': '334', 'content-type': 'application/json', 'x-forwarded-for': '2605:59c0:5fc5:d608:188d:d0fa:709d:6616', 'x-forwarded-host': 'e7456aa48462.ngrok-free.app', 'x-forwarded-proto': 'https', 'accept-encoding': 'gzip'}
2025-11-27 13:29:46,500 - app.api.whatsapp - INFO - Raw payload: {
  "entry": [
    {
      "changes": [
        {
          "value": {
            "messages": [
              {
                "from": "1234567890",
                "text": {
                  "body": "hello"
                },
                "id": "msg123",
                "timestamp": "1701084000",
                "type": "text"
              }
            ],
            "contacts": [
              {
                "name": {
                  "formatted_name": "Test User"
                },
                "wa_id": "1234567890"
              }
            ],
            "metadata": {
              "phone_number_id": "912423798601397",
              "display_phone_number": "15551786519"
            }
          }
        }
      ]
    }
  ]
}
2025-11-27 13:29:46,501 - app.api.whatsapp - INFO - Parsed message object: <app.models.message.WhatsAppMessage object at 0x00000223845CAC10>
2025-11-27 13:29:46,501 - app.api.whatsapp - INFO - From number: 1234567890
2025-11-27 13:29:46,501 - app.api.whatsapp - INFO - Message text: 'hello'
2025-11-27 13:29:46,502 - app.api.whatsapp - INFO - Message length: 5 characters
2025-11-27 13:29:46,502 - app.api.whatsapp - INFO - Message ID: msg123
2025-11-27 13:29:46,503 - app.api.whatsapp - INFO - Message timestamp: 1701084000
2025-11-27 13:29:46,503 - app.api.whatsapp - INFO - Message type: text
2025-11-27 13:29:46,504 - app.api.whatsapp - INFO - Contact name: Test User
2025-11-27 13:29:46,504 - app.api.whatsapp - INFO - Contact wa_id: 1234567890
2025-11-27 13:29:46,507 - app.api.whatsapp - INFO - Phone number ID: 912423798601397
2025-11-27 13:29:46,512 - app.api.whatsapp - INFO - Display phone number: 15551786519
2025-11-27 13:29:48,899 - app.api.whatsapp - ERROR - Error handling message from 1234567890: WhatsApp API configuration missing
2025-11-27 13:29:48,899 - app.api.whatsapp - ERROR - Failed to send error message: WhatsApp API configuration missing
2025-12-01 09:52:15,079 - app.api.whatsapp - INFO - [2025-12-01T07:52:15.079816] Baileys webhook received
2025-12-01 09:52:15,081 - app.api.whatsapp - INFO - Baileys payload: {
  "from": "245943215608017@lid",
  "text": "Hello",
  "rawMessage": {
    "key": {
      "remoteJid": "245943215608017@lid",
      "fromMe": false,
      "id": "A5AFF351BF9F0C5C2915D6BD455BED64",
      "senderPn": "263777530322@s.whatsapp.net"
    },
    "messageTimestamp": 1764575532,
    "pushName": "Vincent Mugondora",
    "broadcast": false,
    "message": {
      "extendedTextMessage": {
        "text": "Hello",
        "previewType": "NONE",
        "contextInfo": {
          "entryPointConversionSource": "global_search_new_chat",
          "entryPointConversionApp": "whatsapp",
          "entryPointConversionDelaySeconds": 4
        },
        "inviteLinkGroupTypeV2": "DEFAULT"
      },
      "messageContextInfo": {
        "deviceListMetadata": {
          "senderTimestamp": "1764140775",
          "recipientKeyHash": "/T956n6fmdF6bA==",
          "recipientTimestamp": "1764575501"
        },
        "deviceListMetadataVersion": 2,
        "messageSecret": "nnsVbaTdSFRmWtP+QD18XgWJNORtDFgtRoSCiR/SI4s="
      }
    },
    "verifiedBizName": "Vincent Mugondora"
  }
}
2025-12-01 09:52:15,082 - app.api.whatsapp - INFO - Baileys message from: 245943215608017@lid
2025-12-01 09:52:15,083 - app.api.whatsapp - INFO - Baileys text: 'Hello'
2025-12-01 09:52:19,123 - httpx - INFO - HTTP Request: POST http://localhost:3000/send-text "HTTP/1.1 500 Internal Server Error"
2025-12-01 09:52:19,128 - app.api.whatsapp - ERROR - Error handling Baileys message from 245943215608017@lid: Server error '500 Internal Server Error' for url 'http://localhost:3000/send-text'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/500
2025-12-01 09:52:19,911 - httpx - INFO - HTTP Request: POST http://localhost:3000/send-text "HTTP/1.1 500 Internal Server Error"
2025-12-01 09:52:19,916 - app.api.whatsapp - ERROR - Failed to send Baileys error message: Server error '500 Internal Server Error' for url 'http://localhost:3000/send-text'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/500
